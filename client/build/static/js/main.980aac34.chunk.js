(this["webpackJsonpplaylister-hw4"]=this["webpackJsonpplaylister-hw4"]||[]).push([[0],{168:function(e,t,n){},211:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(40),c=n.n(s),i=(n(168),n(42)),o=n(20),l=n(3),u=n(8),d=n(10),j=n(67),b=n.n(j);b.a.defaults.withCredentials=!0;var p=b.a.create({baseURL:"http://localhost:4000/auth"}),x={getLoggedIn:function(){return p.get("/loggedIn/")},registerUser:function(e,t,n,r,a,s){return p.post("/register/",{firstName:t,lastName:n,email:r,password:a,passwordVerify:s,username:e})},loginUser:function(e,t){return p.post("/login/",{email:e,password:t})},logoutUser:function(){return p.get("/logout/")}},O=n(0),h=Object(r.createContext)();console.log("create AuthContext: "+h);var f={GET_LOGGED_IN:"GET_LOGGED_IN",LOGIN_USER:"LOGIN_USER",LOGOUT_USER:"LOGOUT_USER",REGISTER_USER:"REGISTER_USER",HIDE_ERROR_MODAL:"HIDE_ERROR_MODAL",DISPLAY_ERROR_MODAL:"DISPLAY_ERROR_MODAL",HOME:"HOME",ALL_LISTS:"ALL_LISTS",USERS:"USERS",GUEST:"GUEST"};function m(e){var t=Object(r.useState)({user:null,loggedIn:!1,e:!1,message:"",home:!1,allLists:!1,users:!1}),n=Object(d.a)(t,2),a=n[0],s=n[1],c=Object(o.f)();Object(r.useEffect)((function(){a.getLoggedIn()}),[]);var i=function(e){var t=e.type,n=e.payload;switch(t){case f.GET_LOGGED_IN:return s({user:n.user,loggedIn:n.loggedIn,e:a.e,message:a.message,home:a.home,allLists:a.allLists,users:a.users});case f.LOGIN_USER:return s({user:n.user,loggedIn:!0,e:a.e,message:a.message,home:!0,allLists:!1,users:!1});case f.GUEST:return s({user:null,loggedIn:!0,e:a.e,message:a.message,home:!1,allLists:!0,users:!1});case f.LOGOUT_USER:return s({user:null,loggedIn:!1,e:a.e,message:a.message,home:!1,allLists:!1,users:!1});case f.REGISTER_USER:return s({user:null,loggedIn:!1,e:a.e,message:a.message,home:!0,allLists:!1,users:!1});case f.HIDE_ERROR_MODAL:return s({user:a.user,loggedIn:a.loggedIn,e:!1,message:"",home:a.home,allLists:a.allLists,users:a.users});case f.DISPLAY_ERROR_MODAL:return s({user:a.user,loggedIn:a.loggedIn,e:!0,message:n.message,home:a.home,allLists:a.allLists,users:a.users});case f.HOME:return s({user:a.user,loggedIn:a.loggedIn,e:!1,message:"",home:!0,allLists:!1,users:!1});case f.ALL_LISTS:return s({user:a.user,loggedIn:a.loggedIn,e:!1,message:"",home:!1,allLists:!0,users:!1});case f.USERS:return s({user:a.user,loggedIn:a.loggedIn,e:!1,message:"",home:!1,allLists:!1,users:!0});default:return a}};return a.getLoggedIn=Object(u.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getLoggedIn();case 2:200===(t=e.sent).status&&i({type:f.SET_LOGGED_IN,payload:{loggedIn:t.data.loggedIn,user:t.data.user}});case 4:case"end":return e.stop()}}),e)}))),a.registerUser=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n,r,a,s,o){var u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.registerUser(t,n,r,a,s,o);case 3:200===(u=e.sent).status&&(i({type:f.REGISTER_USER,payload:{user:u.data.user}}),c.push("/login")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),i({type:f.DISPLAY_ERROR_MODAL,payload:{message:e.t0.response.data.errorMessage}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r,a,s,c){return e.apply(this,arguments)}}(),a.hideErrorModal=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:f.HIDE_ERROR_MODAL});case 1:case"end":return e.stop()}}),e)}))),a.continueAsGuest=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:f.GUEST});case 1:case"end":return e.stop()}}),e)}))),a.loginUser=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t,n),e.next=4,x.loginUser(t,n);case 4:r=e.sent,console.log(r.data.user),200===r.status&&(i({type:f.LOGIN_USER,payload:{user:r.data.user}}),c.push("/")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i({type:f.DISPLAY_ERROR_MODAL,payload:{message:e.t0.response.data.errorMessage}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),a.logoutUser=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.logoutUser();case 2:200===e.sent.status&&(i({type:f.LOGOUT_USER,payload:null}),c.push("/"));case 4:case"end":return e.stop()}}),e)}))),a.getUserInitials=function(){var e="";return a.user&&(e+=a.user.firstName.charAt(0),e+=a.user.lastName.charAt(0)),console.log("user initials: "+e),e},a.goHome=function(){i({type:f.HOME})},a.goAllLists=function(){i({type:f.ALL_LISTS})},a.goUsers=function(){i({type:f.USERS})},Object(O.jsx)(h.Provider,{value:{auth:a},children:e.children})}var g=h,y=n(29),v=n(30),S=function(){function e(){Object(y.a)(this,e),this.transactions=[],this.numTransactions=0,this.mostRecentTransaction=-1,this.performingDo=!1,this.performingUndo=!1}return Object(v.a)(e,[{key:"isPerformingDo",value:function(){return this.performingDo}},{key:"isPerformingUndo",value:function(){return this.performingUndo}},{key:"getSize",value:function(){return this.transactions.length}},{key:"getRedoSize",value:function(){return this.getSize()-this.mostRecentTransaction-1}},{key:"getUndoSize",value:function(){return this.mostRecentTransaction+1}},{key:"hasTransactionToRedo",value:function(){return this.mostRecentTransaction+1<this.numTransactions}},{key:"hasTransactionToUndo",value:function(){return this.mostRecentTransaction>=0}},{key:"addTransaction",value:function(e){if(this.mostRecentTransaction<0||this.mostRecentTransaction<this.transactions.length-1){for(var t=this.transactions.length-1;t>this.mostRecentTransaction;t--)this.transactions.splice(t,1);this.numTransactions=this.mostRecentTransaction+2}else this.numTransactions++;this.transactions[this.mostRecentTransaction+1]=e,this.doTransaction()}},{key:"doTransaction",value:function(){this.hasTransactionToRedo()&&(this.performingDo=!0,this.transactions[this.mostRecentTransaction+1].doTransaction(),this.mostRecentTransaction++,this.performingDo=!1)}},{key:"undoTransaction",value:function(){this.hasTransactionToUndo()&&(this.performingUndo=!0,this.transactions[this.mostRecentTransaction].undoTransaction(),this.mostRecentTransaction--,this.performingUndo=!1)}},{key:"clearAllTransactions",value:function(){this.transactions=[],this.mostRecentTransaction=-1,this.numTransactions=0}},{key:"toString",value:function(){var e="--Number of Transactions: "+this.numTransactions+"\n";e+="--Current Index on Stack: "+this.mostRecentTransaction+"\n",e+="--Current Transaction Stack:\n";for(var t=0;t<=this.mostRecentTransaction;t++){e+="----"+this.transactions[t].toString()+"\n"}return e}}]),e}();b.a.defaults.withCredentials=!0;var I=b.a.create({baseURL:"http://localhost:4000/api"}),L={createPlaylist:function(e,t,n,r){return I.post("/playlist/",{name:e,songs:t,ownerEmail:n,ownerName:r,published:!1,publishedDate:null,likes:[],dislikes:[],likesCount:0,dislikesCount:0,listens:0,comments:[]})},deletePlaylistById:function(e){return I.delete("/playlist/".concat(e))},getPlaylistById:function(e){return I.get("/playlist/".concat(e))},getPlaylistPairs:function(e,t){return I.get("/playlistpairs/".concat(e),{params:{search:t}})},updatePlaylistById:function(e,t){return I.put("/playlist/".concat(e),{playlist:t})},getAllPlaylists:function(e,t,n){return I.get("/playlists/".concat(e),{params:{search:t,type:n}})}},k=n(44),w=n(46),P=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(e,r,a){var s;return Object(y.a)(this,n),(s=t.call(this)).store=e,s.index=r,s.song=a,s}return Object(v.a)(n,[{key:"doTransaction",value:function(){this.store.createSong(this.index,this.song)}},{key:"undoTransaction",value:function(){this.store.removeSong(this.index)}}]),n}(S),N=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(e,r,a){var s;return Object(y.a)(this,n),(s=t.call(this)).store=e,s.oldSongIndex=r,s.newSongIndex=a,s}return Object(v.a)(n,[{key:"doTransaction",value:function(){this.store.moveSong(this.oldSongIndex,this.newSongIndex)}},{key:"undoTransaction",value:function(){this.store.moveSong(this.newSongIndex,this.oldSongIndex)}}]),n}(S),E=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(e,r,a){var s;return Object(y.a)(this,n),(s=t.call(this)).store=e,s.index=r,s.song=a,s}return Object(v.a)(n,[{key:"doTransaction",value:function(){this.store.removeSong(this.index)}},{key:"undoTransaction",value:function(){this.store.createSong(this.index,this.song)}}]),n}(S),C=function(e){Object(k.a)(n,e);var t=Object(w.a)(n);function n(e,r,a,s){var c;return Object(y.a)(this,n),(c=t.call(this)).store=e,c.index=r,c.oldSongData=a,c.newSongData=s,c}return Object(v.a)(n,[{key:"doTransaction",value:function(){this.store.updateSong(this.index,this.newSongData)}},{key:"undoTransaction",value:function(){this.store.updateSong(this.index,this.oldSongData)}}]),n}(S),T=Object(r.createContext)({});console.log("create GlobalStoreContext");var _={CHANGE_LIST_NAME:"CHANGE_LIST_NAME",CLOSE_CURRENT_LIST:"CLOSE_CURRENT_LIST",CREATE_NEW_LIST:"CREATE_NEW_LIST",LOAD_ID_NAME_PAIRS:"LOAD_ID_NAME_PAIRS",LOAD_ID_NAME_PAIRS2:"LOAD_ID_NAME_PAIRS2",MARK_LIST_FOR_DELETION:"MARK_LIST_FOR_DELETION",UNMARK_LIST_FOR_DELETION:"UNMARK_LIST_FOR_DELETEION",SET_CURRENT_LIST:"SET_CURRENT_LIST",SET_LIST_NAME_EDIT_ACTIVE:"SET_LIST_NAME_EDIT_ACTIVE",EDIT_SONG:"EDIT_SONG",REMOVE_SONG:"REMOVE_SONG",HIDE_MODALS:"HIDE_MODALS",LOAD_ALL_PLAYLISTS:"LOAD_ALL_PLAYLISTS",PUBLISH_LIST:"PUBLISH_LIST",LIKE:"LIKE",UPDATE_QUERIES:"UPDATE_QUERIES",UPDATE_PLAY_SONG:"UPDATE_PLAY_SONG"},D=new S,A="NONE",R="DELETE_LIST",M="EDIT_SONG",Q="REMOVE_SONG",U="PLAYLIST_EXISTS";function F(e){var t=Object(r.useState)({currentModal:A,idNamePairs:[],allPlaylists:[],currentList:null,currentSongIndex:-1,currentSong:null,newListCounter:0,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,deleteSong:null,deleteSongIndex:-1,sortQuery:-1,searchQuery:"",currentPlayIndex:null}),n=Object(d.a)(t,2),a=n[0],s=n[1];Object(o.f)();console.log("inside useGlobalStore");var c=Object(r.useContext)(g).auth;console.log("auth: "+c);var i=function(e){var t=e.type,n=e.payload;switch(t){case _.CHANGE_LIST_NAME:return s({currentModal:A,idNamePairs:n.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.CLOSE_CURRENT_LIST:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:null,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:-1});case _.CREATE_NEW_LIST:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter+1,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.PUBLISH_LIST:return s({currentModal:A,idNamePairs:n.idNamePairs,allPlaylists:a.allPlaylists,currentList:null,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.LOAD_ID_NAME_PAIRS:return s({currentModal:A,idNamePairs:n.idNamePairs,allPlaylists:n.allPlaylists,currentList:null,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:n.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.LOAD_ID_NAME_PAIRS2:return s({currentModal:A,idNamePairs:n.idNamePairs,allPlaylists:n.allPlaylists,currentList:null,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:n.sortQuery,searchQuery:n.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.LOAD_ALL_PLAYLISTS:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:n,currentList:null,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.MARK_LIST_FOR_DELETION:return s({currentModal:R,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:n.id,listMarkedForDeletion:n.playlist,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.UNMARK_LIST_FOR_DELETION:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.SET_CURRENT_LIST:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:n,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:0});case _.SET_LIST_NAME_EDIT_ACTIVE:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:n,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!0,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.EDIT_SONG:return s({currentModal:M,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:n.currentSongIndex,currentSong:n.currentSong,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.SHOW_NAME_EXISTS:return s({currentModal:U,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:a.currentSongIndex,currentSong:a.currentSong,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.LIKE:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:a.currentSongIndex,currentSong:a.currentSong,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.REMOVE_SONG:return s({currentModal:Q,idNamePairs:a.idNamePairs,allPlaylists:n,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:n.deleteSongIndex,deleteSong:n.deleteSong,newListCounter:null,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.HIDE_MODALS:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sortQuery,searchQuery:a.searchQuery,currentPlayIndex:a.currentPlayIndex});case _.UPDATE_QUERIES:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:n.sort,searchQuery:n.search,currentPlayIndex:a.currentPlayIndex});case _.UPDATE_PLAY_SONG:return s({currentModal:A,idNamePairs:a.idNamePairs,allPlaylists:a.allPlaylists,currentList:a.currentList,currentSongIndex:-1,currentSong:null,deleteSongIndex:-1,deleteSong:null,newListCounter:a.newListCounter,listNameActive:!1,listIdMarkedForDeletion:null,listMarkedForDeletion:null,sortQuery:a.sort,searchQuery:a.search,currentPlayIndex:n});default:return a}};return a.updatePlaySong=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:_.UPDATE_PLAY_SONG,payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.updateQueries=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:_.UPDATE_QUERIES,payload:{sort:t,search:n}});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.changeListName=function(e,t){for(var n=0;n<a.idNamePairs.length;n++){if(a.idNamePairs[n].name===t)return i({type:_.SHOW_NAME_EXISTS}),!1}function r(){return r=Object(u.a)(Object(l.a)().mark((function e(n){var r,a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPlaylistById(n);case 2:(r=e.sent).data.success&&(a=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.updatePlaylistById(t._id,t);case 2:(r=e.sent).data.success&&(n=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPlaylistPairs();case 2:(r=e.sent).data.success&&(n=r.data.idNamePairs,i({type:_.CHANGE_LIST_NAME,payload:{idNamePairs:n,playlist:t}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(s=r.data.playlist).name=t,a(s));case 4:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}!function(e){r.apply(this,arguments)}(e)},a.publishPlaylist=function(){function e(){return e=Object(u.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=function(){return n=Object(u.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.updatePlaylistById(a.currentList._id,a.currentList);case 2:(t=e.sent).data.success&&(n=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPlaylistPairs();case 2:(t=e.sent).data.success&&(n=t.data.idNamePairs,i({type:_.PUBLISH_LIST,payload:{idNamePairs:n,playlist:a.currentList}}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n());case 4:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)},t=function(){return n.apply(this,arguments)},a.currentList.published=!0,a.currentList.publishedDate=new Date,a.currentList.likes=[],a.currentList.dislikes=[],t();case 7:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()},a.closeCurrentList=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:_.CLOSE_CURRENT_LIST,payload:{}}),D.clearAllTransactions();case 2:case"end":return e.stop()}}),e)}))),a.createNewList=Object(u.a)(Object(l.a)().mark((function e(){var t,n,r,s,o,u,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0,n=0;n<a.idNamePairs.length;n++)"Untitled"===(r=a.idNamePairs[n].name).substring(0,8)&&(s=parseInt(r.substring(9)),t=Math.max(t,s+1));return o="Untitled "+t,e.next=5,L.createPlaylist(o,[],c.user.email,c.user.username);case 5:if(201!==(u=e.sent).status){e.next=14;break}return D.clearAllTransactions(),d=u.data.playlist,i({type:_.CREATE_NEW_LIST,payload:d}),e.next=12,a.loadIdNamePairs();case 12:e.next=15;break;case 14:console.log("API FAILED TO CREATE A NEW LIST");case 15:case"end":return e.stop()}}),e)}))),a.duplicateOwnList=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,r,s,o,u,d,j,b,p;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=2,r=!1,s=0;case 3:if(!(s<a.idNamePairs.length)){e.next=11;break}if(a.idNamePairs[s].name!==t.name){e.next=8;break}return r=!0,e.abrupt("break",11);case 8:s++,e.next=3;break;case 11:if(!r){e.next=29;break}case 12:0,o=t.name+" "+n,u=!1,d=0;case 16:if(!(d<a.idNamePairs.length)){e.next=24;break}if(a.idNamePairs[d].name!==o){e.next=21;break}return u=!0,e.abrupt("break",24);case 21:d++,e.next=16;break;case 24:if(u){e.next=26;break}return e.abrupt("break",29);case 26:n+=1,e.next=12;break;case 29:return j=t.name+" "+n,r||(j=t.name),e.next=33,L.createPlaylist(j,t.songs,c.user.email,c.user.username);case 33:if(201!==(b=e.sent).status){e.next=42;break}return D.clearAllTransactions(),p=b.data.playlist,i({type:_.CREATE_NEW_LIST,payload:p}),e.next=40,a.loadIdNamePairs();case 40:e.next=43;break;case 42:console.log("API FAILED TO CREATE A NEW LIST");case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.likePlaylist=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){var r,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){return s=Object(u.a)(Object(l.a)().mark((function e(t){var r,a,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPlaylistById(t);case 2:if(!(r=e.sent).data.success){e.next=13;break}return a=r.data.playlist,1===n?a.likes.push(c.user.email):2===n&&a.dislikes.push(c.user.email),e.next=8,L.updatePlaylistById(a._id,a);case 8:if(!(r=e.sent).data.success){e.next=13;break}return s=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAllPlaylists();case 2:(r=e.sent).data.success&&(t=r.data.data,console.log("pairsArray",t),i({type:_.LIKE,payload:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=13,s();case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},r=function(e){return s.apply(this,arguments)},null!==c.user){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r(t);case 6:return e.next=8,a.loadIdNamePairs();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.dislikePlaylist=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){var r,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(){return s=Object(u.a)(Object(l.a)().mark((function e(t){var r,a,s,o,d;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPlaylistById(t);case 2:if(!(r=e.sent).data.success){e.next=13;break}return a=r.data.playlist,1===n?(s=a.likes.indexOf(c.user.email))>-1&&a.likes.splice(s,1):2===n&&(o=a.dislikes.indexOf(c.user.email))>-1&&a.dislikes.splice(o,1),e.next=8,L.updatePlaylistById(a._id,a);case 8:if(!(r=e.sent).data.success){e.next=13;break}return d=function(){var e=Object(u.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getAllPlaylists();case 2:(r=e.sent).data.success&&(t=r.data.data,console.log("pairsArray",t),i({type:_.LIKE,payload:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=13,d();case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)},r=function(e){return s.apply(this,arguments)},null!==c.user){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,r(t);case 6:return e.next=8,a.loadIdNamePairs();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.addComment=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){var n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){return(r=Object(u.a)(Object(l.a)().mark((function e(){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:c.user.username,comment:t},a.currentList.comments.push(n),e.next=4,a.updateCurrentList();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)},n=function(){return r.apply(this,arguments)},n();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.addListen=Object(u.a)(Object(l.a)().mark((function e(){var t,n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return(n=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.currentList.listens=a.currentList.listens+1,e.next=3,a.updateCurrentList();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)},t=function(){return n.apply(this,arguments)},e.next=4,t();case 4:case"end":return e.stop()}}),e)}))),a.loadIdNamePairs=Object(u.a)(Object(l.a)().mark((function e(){var t,n,r,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],null===c.user){e.next=5;break}return e.next=4,L.getPlaylistPairs(a.sortQuery,a.searchQuery);case 4:t=e.sent;case 5:return e.next=7,L.getAllPlaylists(a.sortQuery,a.searchQuery,!1);case 7:if(!(n=e.sent).data.success){e.next=16;break}return r=[],null!==c.user&&(r=t.data.idNamePairs),s=n.data.data,e.next=14,i({type:_.LOAD_ID_NAME_PAIRS,payload:{idNamePairs:r,allPlaylists:s,sortQuery:a.sortQuery,searchQuery:a.searchQuery}});case 14:e.next=17;break;case 16:console.log("API FAILED TO GET THE LIST PAIRS");case 17:case"end":return e.stop()}}),e)}))),a.loadIdNamePairs2=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n,r){var a,s,o,u;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null===c.user){e.next=5;break}return e.next=4,L.getPlaylistPairs(t,n);case 4:a=e.sent;case 5:return e.next=7,L.getAllPlaylists(t,n,r);case 7:if(!(s=e.sent).data.success){e.next=16;break}return o=[],null!==c.user&&(o=a.data.idNamePairs),u=s.data.data,e.next=14,i({type:_.LOAD_ID_NAME_PAIRS2,payload:{idNamePairs:o,allPlaylists:u,sortQuery:t,searchQuery:n}});case 14:e.next=17;break;case 16:console.log("API FAILED TO GET THE LIST PAIRS");case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a.unmarkListForDeletion=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i({type:_.UNMARK_LIST_FOR_DELETION,payload:{}});case 1:case"end":return e.stop()}}),e)}))),a.markListForDeletion=function(e){function t(){return t=Object(u.a)(Object(l.a)().mark((function e(t){var n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPlaylistById(t);case 2:(n=e.sent).data.success&&(r=n.data.playlist,i({type:_.MARK_LIST_FOR_DELETION,payload:{id:t,playlist:r}}));case 4:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}!function(e){t.apply(this,arguments)}(e)},a.showEditSongModal=function(e,t){i({type:_.EDIT_SONG,payload:{currentSongIndex:e,currentSong:t}})},a.showRemoveSongModal=function(e,t){i({type:_.REMOVE_SONG,payload:{deleteSongIndex:e,deleteSong:t}})},a.deleteList=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.deletePlaylistById(t);case 2:if(200!==e.sent.status){e.next=6;break}return e.next=6,a.loadIdNamePairs();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.deleteMarkedList=Object(u.a)(Object(l.a)().mark((function e(){var t;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("1"),e.next=3,L.deletePlaylistById(a.listIdMarkedForDeletion);case 3:return t=e.sent,console.log(t),200===t.status&&console.log("3"),console.log("4"),console.log(a.idNamePairs),e.next=10,a.hideModals();case 10:case"end":return e.stop()}}),e)}))),a.hideModals=function(){i({type:_.HIDE_MODALS,payload:{}})},a.isDeleteListModalOpen=function(){return a.currentModal===R},a.isEditSongModalOpen=function(){return a.currentModal===M},a.isPlaylistExistsModalOpen=function(){return a.currentModal===U},a.isRemoveSongModalOpen=function(){return a.currentModal===Q},a.setCurrentList=function(e){function t(){return t=Object(u.a)(Object(l.a)().mark((function e(t){var n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPlaylistById(t);case 2:if(!(n=e.sent).data.success){e.next=9;break}return r=n.data.playlist,e.next=7,L.updatePlaylistById(r._id,r);case 7:(n=e.sent).data.success&&i({type:_.SET_CURRENT_LIST,payload:r});case 9:case"end":return e.stop()}}),e)}))),t.apply(this,arguments)}!function(e){t.apply(this,arguments)}(e)},a.getPlaylistSize=function(){return a.currentList.songs.length},a.addNewSong=function(){var e=this.getPlaylistSize();this.addCreateSongTransaction(e,"Untitled","?","dQw4w9WgXcQ")},a.createSong=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.currentList.songs.splice(t,0,n),e.next=4,a.updateCurrentList();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.moveSong=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){var r,s,c,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("MOVING SONG"),r=a.currentList,t<n){for(s=r.songs[t],c=t;c<n;c++)r.songs[c]=r.songs[c+1];r.songs[n]=s}else if(t>n){for(i=r.songs[t],o=t;o>n;o--)r.songs[o]=r.songs[o-1];r.songs[n]=i}return e.next=5,a.updateCurrentList();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.removeSong=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.currentList.songs.splice(t,1),e.next=4,a.updateCurrentList();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.updateSong=function(){var e=Object(u.a)(Object(l.a)().mark((function e(t,n){var r,s;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.currentList,(s=r.songs[t]).title=n.title,s.artist=n.artist,s.youTubeId=n.youTubeId,e.next=7,a.updateCurrentList();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a.addNewSong=function(){var e=a.getPlaylistSize();a.addCreateSongTransaction(e,"Untitled","?","dQw4w9WgXcQ")},a.addCreateSongTransaction=function(e,t,n,r){var s=new P(a,e,{title:t,artist:n,youTubeId:r});D.addTransaction(s)},a.addMoveSongTransaction=function(e,t){var n=new N(a,e,t);D.addTransaction(n)},a.addRemoveSongTransaction=function(){var e=a.deleteSongIndex,t=a.currentList.songs[e],n=new E(a,e,t);D.addTransaction(n)},a.addUpdateSongTransaction=function(e,t){var n=a.currentList.songs[e],r={title:n.title,artist:n.artist,youTubeId:n.youTubeId},s=new C(this,e,r,t);D.addTransaction(s)},a.updateCurrentList=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.updatePlaylistById(a.currentList._id,a.currentList);case 2:e.sent.data.success&&i({type:_.SET_CURRENT_LIST,payload:a.currentList});case 4:case"end":return e.stop()}}),e)}))),a.undo=function(){D.undoTransaction()},a.redo=function(){D.doTransaction()},a.canAddNewSong=function(){return null!==a.currentList},a.canUndo=function(){return null!==a.currentList&&D.hasTransactionToUndo()},a.canRedo=function(){return null!==a.currentList&&D.hasTransactionToRedo()},a.canClose=function(){return null!==a.currentList},a.setIsListNameEditActive=function(){i({type:_.SET_LIST_NAME_EDIT_ACTIVE,payload:null})},Object(O.jsx)(T.Provider,{value:{store:a},children:e.children})}var G=T,H=n.p+"static/media/Playlister.49a61de7.png",B=n(276);n(104),n(133),n(132),n(134);var W=n(286),V=n(285),K=n(289),z=n(144),Y=n(271),q=n(287),X=n(288);function Z(){var e=Object(r.useContext)(g).auth,t=(Object(r.useContext)(T).store,Object(r.useState)(null)),n=Object(d.a)(t,2),a=n[0],s=n[1],c=Boolean(a),o=function(){s(null)},l="primary-search-account-menu",u=Object(O.jsx)(z.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:l,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:o}),j=Object(O.jsx)(z.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},id:l,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:c,onClose:o,children:Object(O.jsx)(Y.a,{onClick:function(){e.logoutUser(),o()},children:"Logout"})}),b=u;return e.loggedIn&&(b=j),Object(O.jsxs)(V.a,{sx:{flexGrow:1},children:[Object(O.jsx)(W.a,{position:"static",style:{background:"#2E3B55"},children:Object(O.jsxs)(q.a,{children:[Object(O.jsx)(X.a,{variant:"h4",noWrap:!0,component:"div",sx:{display:{xs:"none",sm:"block"}},children:Object(O.jsx)(i.b,{style:{textDecoration:"none",color:"white"},to:"/",children:Object(O.jsx)("img",{src:H,style:{height:"12%",width:"12%"}})})}),Object(O.jsx)(V.a,{sx:{flexGrow:1},children:""}),Object(O.jsx)(V.a,{sx:{display:{xs:"none",md:"flex"}},children:Object(O.jsx)(K.a,{size:"large",edge:"end","aria-label":"account of current user","aria-controls":l,"aria-haspopup":"true",onClick:function(e){console.log(e.currentTarget),s(e.currentTarget)},color:"inherit",children:function(t){var n=e.getUserInitials();if(t)return n}(e.loggedIn)})})]})}),b]})}var J=n(272),$=n(273),ee=n(277),te=n(66),ne=n.n(te),re=n(65),ae=n.n(re);var se=function(e){var t=Object(r.useContext)(T).store,n=Object(r.useState)(0),a=Object(d.a)(n,2),s=(a[0],a[1]),c=e.song,i=e.index;function o(){return(o=Object(u.a)(Object(l.a)().mark((function e(n){var r,a,c,i,o;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=n.target,a=(a=r.id).substring(r.id.indexOf("-")+1),c=(c=n.dataTransfer.getData("song")).substring(c.indexOf("-")+1),s(!1),i=parseInt(a.substring(0,1)),o=parseInt(c.substring(0,1)),e.next=11,t.addMoveSongTransaction(o,i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j="list-card unselected-list-card";return i===t.currentPlayIndex&&(j="list-card selected-list-card"),Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsx)(ee.a,{xs:10,children:Object(O.jsxs)("div",{id:"song-"+i+"-card",className:j,onDragStart:function(e){e.dataTransfer.setData("song",i)},onDragOver:function(e){e.preventDefault()},onDragEnter:function(e){e.preventDefault(),s(!0)},onDragLeave:function(e){e.preventDefault(),s(!1)},onDrop:function(e){return o.apply(this,arguments)},draggable:"true",onClick:function(e){console.log(e.target),2===e.detail?(console.log("double click"),t.showEditSongModal(i,c)):t.updatePlaySong(i)},children:[i+1,".",c.title," by ",c.artist]},i)}),Object(O.jsx)(ee.a,{xs:2,children:Object(O.jsx)("input",{type:"button",id:"remove-song-"+i,className:"list-card-button",value:"\u2715",onClick:function(e){console.log("remove song?"),t.showRemoveSongModal(i,c)}})})]})},ce=n(284);var ie=function(e){var t=Object(r.useContext)(T).store,n=Object(r.useState)(0),a=Object(d.a)(n,2),s=(a[0],a[1],e.song,e.index);function c(){return(c=Object(u.a)(Object(l.a)().mark((function e(n){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("clicking + button"),e.next=3,t.addNewSong();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsx)("div",{id:"song-"+s+"-card",className:"list-card unselected-list-card",onClick:function(e){return c.apply(this,arguments)},children:"+"},s)},oe=n(266),le={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ue(){var e=Object(r.useContext)(G).store;e.isRemoveSongModalOpen();return e.currentSong&&e.currentSong.title,Object(O.jsx)(oe.a,{open:null!==e.deleteSong,children:Object(O.jsx)(V.a,{sx:le,children:Object(O.jsxs)("div",{className:"modal-dialog","data-animation":"slideInOutLeft",children:[Object(O.jsxs)("header",{className:"dialog-header",children:["Delete ",e.deleteSong.title," from the playlist?"]}),Object(O.jsxs)("div",{id:"confirm-cancel-container",children:[Object(O.jsx)(B.a,{id:"dialog-yes-button",className:"modal-button",onClick:function(){e.addRemoveSongTransaction()},color:"primary",variant:"contained",children:"Confirm"}),Object(O.jsx)(B.a,{id:"dialog-no-button",className:"modal-button",onClick:function(){e.hideModals()},color:"secondary",variant:"contained",children:"Cancel"})]})]})})})}var de={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function je(){var e=Object(r.useContext)(G).store,t=Object(r.useState)(e.currentSong.title),n=Object(d.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(e.currentSong.artist),i=Object(d.a)(c,2),o=i[0],l=i[1],u=Object(r.useState)(e.currentSong.youTubeId),j=Object(d.a)(u,2),b=j[0],p=j[1];return console.log(e),Object(O.jsx)(oe.a,{open:null!==e.currentSong,children:Object(O.jsx)(V.a,{sx:de,children:Object(O.jsx)("div",{id:"modal-dialog",className:"modal-dialog","data-animation":"slideInOutLeft",children:Object(O.jsxs)("div",{id:"dialog-header",children:[Object(O.jsx)("div",{className:"",children:Object(O.jsx)("h2",{children:"Edit Song"})}),Object(O.jsxs)("div",{id:"dialog-header",className:"modal-center",children:[Object(O.jsx)("div",{id:"title-prompt",className:"modal-prompt",children:"Title:"}),Object(O.jsx)("input",{id:"edit-song-modal-title-textfield",className:"modal-textfield",type:"text",defaultValue:a,onChange:function(e){s(e.target.value)}}),Object(O.jsx)("div",{id:"artist-prompt",className:"modal-prompt",children:"Artist:"}),Object(O.jsx)("input",{id:"edit-song-modal-artist-textfield",className:"modal-textfield",type:"text",defaultValue:o,onChange:function(e){l(e.target.value)}}),Object(O.jsx)("div",{id:"you-tube-id-prompt",className:"modal-prompt",children:"You Tube Id:"}),Object(O.jsx)("input",{id:"edit-song-modal-youTubeId-textfield",className:"modal-textfield",type:"text",defaultValue:b,onChange:function(e){p(e.target.value)}})]}),Object(O.jsxs)("div",{className:"confirm-cancel-container",children:[Object(O.jsx)(B.a,{id:"dialog-yes-button",className:"modal-button",onClick:function(){var t={title:a,artist:o,youTubeId:b};e.addUpdateSongTransaction(e.currentSongIndex,t)},color:"primary",variant:"contained",children:"Confirm"}),Object(O.jsx)(B.a,{id:"dialog-no-button",className:"modal-button",onClick:function(){e.hideModals()},color:"secondary",variant:"contained",children:"Cancel"})]})]})})})})}var be={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function pe(){var e=Object(r.useContext)(G).store,t="";function n(){return(n=Object(u.a)(Object(l.a)().mark((function t(n){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.deleteMarkedList();case 2:return t.next=4,e.loadIdNamePairs();case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.listMarkedForDeletion&&(t=e.listMarkedForDeletion.name),Object(O.jsx)(oe.a,{open:null!==e.listMarkedForDeletion,children:Object(O.jsxs)(V.a,{sx:be,children:[Object(O.jsxs)("div",{className:"modal-dialog",children:[Object(O.jsxs)("header",{className:"dialog-header",children:["Delete ",t," from Playlister?"]}),Object(O.jsxs)("div",{id:"confirm-cancel-container",children:[Object(O.jsx)(B.a,{id:"dialog-yes-button",className:"modal-button",onClick:function(e){return n.apply(this,arguments)},color:"primary",variant:"contained",children:"Confirm"}),Object(O.jsx)(B.a,{id:"dialog-no-button",className:"modal-button",onClick:function(t){e.unmarkListForDeletion()},color:"secondary",variant:"contained",children:"Cancel"})]})]}),!e.listMarkedForDeletion&&Object(O.jsx)("div",{})]})})}var xe=n(269),Oe={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function he(){var e=Object(r.useContext)(T).store;Object(r.useEffect)((function(){}),[]);return Object(O.jsx)(oe.a,{open:"PLAYLIST_EXISTS"===e.currentModal,children:Object(O.jsxs)(V.a,{sx:Oe,children:[Object(O.jsx)(xe.a,{severity:"warning",children:"Playlist name already exists."}),Object(O.jsx)(B.a,{id:"dialog-yes-button",className:"modal-button",onClick:function(){e.hideModals()},color:"primary",variant:"contained",children:"Confirm"})]})})}var fe=function(e){var t=Object(r.useContext)(T).store,n=Object(r.useState)(!1),a=Object(d.a)(n,2),s=a[0],c=a[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],b=o[1],p=e.playlist,x=(e.selected,Object(r.useState)(!1)),h=Object(d.a)(x,2),f=h[0],m=h[1];function g(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=7;break}if(null!==t.currentList){e.next=5;break}return m(!f),e.next=5,t.setCurrentList(p._id);case 5:e.next=10;break;case 7:return m(!f),e.next=10,t.closeCurrentList();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){console.log(e.target),2===e.detail&&null===t.currentList&&c(!0)}function S(){c(!1)}Object(r.useEffect)(Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("this is actially changing2");case 1:case"end":return e.stop()}}),e)}))),[]);var I=function(){var e=Object(u.a)(Object(l.a)().mark((function e(n){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("key downnnnn"),90!==n.keyCode||!n.ctrlKey){e.next=8;break}return e.next=4,t.canUndo();case 4:if(!e.sent){e.next=8;break}return e.next=8,t.undo();case 8:if(89!==n.keyCode||!n.ctrlKey){e.next=15;break}return e.next=11,t.canRedo();case 11:if(!e.sent){e.next=15;break}return e.next=15,t.redo();case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.isListNameEditActive;var L="";function k(){return(k=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.markListForDeletion(p._id);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return(w=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.publishPlaylist();case 2:g();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(){return(P=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.duplicateOwnList(p),g();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.isRemoveSongModalOpen()?(console.log(t.removeSong),L=Object(O.jsx)(ue,{})):t.isEditSongModalOpen()?(console.log("edit song modal is open"),L=Object(O.jsx)(je,{})):t.isPlaylistExistsModalOpen()&&(L=Object(O.jsx)(he,{}));var N=Object(O.jsxs)(J.a,{id:p._id,sx:{display:"flex",p:1},style:{width:"100%",border:"1px solid",borderRadius:"5px",marginBottom:"20px"},button:!0,children:[Object(O.jsxs)(ee.a,{container:!0,onClick:v,onKeyDown:I,tabIndex:"0",children:[Object(O.jsxs)(ee.a,{item:!0,xs:6,children:[!s&&Object(O.jsx)("h2",{children:p.name}),s&&Object(O.jsx)($.a,{margin:"normal",required:!0,fullWidth:!0,id:"list-"+p._id,label:"Playlist Name",name:"name",autoComplete:"Playlist Name",className:"list-card",onKeyPress:function(e){if("Enter"===e.code){var n=e.target.id.substring("list-".length);if(!1===t.changeListName(n,j))return;S()}},onChange:function(e){b(e.target.value)},defaultValue:p.name,inputProps:{style:{fontSize:30}},InputLabelProps:{style:{fontSize:24}},autoFocus:!0}),Object(O.jsxs)("p",{children:["By ",p.ownerName]})]}),Object(O.jsx)(ee.a,{item:!0,xs:6}),f&&Object(O.jsxs)(ee.a,{container:!0,onClick:v,children:[Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)(V.a,{tabIndex:"0",sx:{maxHeight:"300px",overflow:"scroll"},children:Object(O.jsx)(ce.a,{id:"playlist-cards",sx:{width:"100%",bgcolor:"background.paper"},children:t.currentList&&t.currentList.songs.map((function(e,t){return Object(O.jsx)(se,{id:"playlist-song-"+t,index:t,song:e},"playlist-song-"+t)}))})})}),Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)(ie,{})}),Object(O.jsx)(ee.a,{item:!0,xs:2,children:Object(O.jsx)(B.a,{onClick:function(){t.undo()},children:"Undo"})}),Object(O.jsx)(ee.a,{item:!0,xs:2,children:Object(O.jsx)(B.a,{onClick:function(){t.redo()},children:"Redo"})}),Object(O.jsx)(ee.a,{item:!0,xs:2}),Object(O.jsx)(ee.a,{item:!0,xs:2,children:Object(O.jsx)(B.a,{onClick:function(){return w.apply(this,arguments)},children:"Publish"})}),Object(O.jsx)(ee.a,{item:!0,xs:2,children:Object(O.jsx)(B.a,{onClick:function(){return k.apply(this,arguments)},children:"Delete"})}),Object(O.jsx)(ee.a,{item:!0,xs:2,children:Object(O.jsx)(B.a,{onClick:function(){return P.apply(this,arguments)},children:"Duplicate"})})]}),Object(O.jsx)(ee.a,{item:!0,xs:9}),Object(O.jsxs)(ee.a,{item:!0,xs:3,children:[!f&&Object(O.jsx)(ae.a,{onClick:g}),f&&Object(O.jsx)(ne.a,{onClick:g})]})]}),L,Object(O.jsx)(pe,{})]},p._id);return N},me=n(109),ge=n.n(me),ye=n(110),ve=n.n(ye),Se=n(89),Ie=n.n(Se),Le=n(293),ke=n(274),we=n(270),Pe=n(136),Ne=n.n(Pe);function Ee(){var e=Object(r.useContext)(g).auth,t=Object(r.useContext)(T).store,n=Object(r.useState)(null===e.user?1:0),a=Object(d.a)(n,2),s=a[0],c=a[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),j=o[0],b=o[1],p=Object(r.useState)(""),x=Object(d.a)(p,2),h=x[0],f=x[1],m=function(){null!==e.user&&(e.goHome(),b(""),t.updateQueries(-1,""),c(0),f(""))},y=function(){e.goAllLists(),b(""),t.updateQueries(-1,""),c(1),f("")},v=function(){e.goAllLists(),b(""),t.updateQueries(-1,""),c(2),f("")},S=function(){var e=Object(u.a)(Object(l.a)().mark((function e(n){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(n.target.value),r=["Name (A-Z)","Publish Date (Newest)","Listens (High - Low)","Likes (High - Low)","Dislikes (High - Low)"].indexOf(n.target.value),t.updateQueries(r,h).then((function(e){t.loadIdNamePairs2(r,h)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(V.a,{sx:{flexGrow:1},children:Object(O.jsx)(W.a,{position:"static",style:{background:"#75816b"},children:Object(O.jsx)(q.a,{children:Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsxs)(ee.a,{xs:1,children:[null!==e.user&&0===s&&Object(O.jsx)(ge.a,{onClick:m,style:{border:"1px solid"}}),null!==e.user&&0!==s&&Object(O.jsx)(ge.a,{onClick:m})]}),Object(O.jsxs)(ee.a,{xs:1,children:[1===s&&Object(O.jsx)(ve.a,{onClick:y,style:{border:"1px solid"}}),1!==s&&Object(O.jsx)(ve.a,{onClick:y})]}),Object(O.jsxs)(ee.a,{xs:1,children:[2===s&&Object(O.jsx)(Ie.a,{onClick:v,style:{border:"1px solid"}}),2!==s&&Object(O.jsx)(Ie.a,{onClick:v})]}),Object(O.jsxs)(ee.a,{xs:6,children:[Object(O.jsx)($.a,{id:"search-bar",className:"text",label:"Search",variant:"outlined",placeholder:"Search...",size:"small",onKeyDown:function(e){if(13===e.keyCode){var n=["Name (A-Z)","Publish Date (Newest)","Listens (High - Low)","Likes (High - Low)","Dislikes (High - Low)"].indexOf(j);f(e.target.value),t.updateQueries(n,e.target.value).then((function(r){t.loadIdNamePairs2(n,e.target.value,2==s)}))}},style:{width:"90%",fill:"blue",background:"white"}}),Object(O.jsx)(K.a,{type:"submit","aria-label":"search",children:Object(O.jsx)(Ne.a,{style:{fill:"blue"}})})]}),Object(O.jsx)(ee.a,{xs:3,children:Object(O.jsxs)(Le.a,{style:{background:"white",width:"90%"},children:[Object(O.jsx)(ke.a,{children:"Sort By..."}),Object(O.jsxs)(we.a,{value:j,onChange:S,children:[Object(O.jsx)(Y.a,{value:"Name (A-Z)",id:0,children:"Name (A-Z)"}),Object(O.jsx)(Y.a,{value:"Publish Date (Newest)",id:1,children:"Publish Date (Newest)"}),Object(O.jsx)(Y.a,{value:"Listens (High - Low)",id:2,children:"Listens (High - Low)"}),Object(O.jsx)(Y.a,{value:"Likes (High - Low)",id:3,children:"Likes (High - Low)"}),Object(O.jsx)(Y.a,{value:"Dislikes (High - Low)",id:4,children:"Dislikes (High - Low)"})]})]})})]})})})})}var Ce=n(73),Te=n.n(Ce),_e=n(74),De=n.n(_e),Ae=n(91),Re=n.n(Ae),Me=n(90),Qe=n.n(Me);var Ue=function(e){var t=Object(r.useContext)(T).store,n=Object(r.useState)(0),a=Object(d.a)(n,2),s=(a[0],a[1],e.song),c=e.index,i="list-card unselected-list-card";return c===t.currentPlayIndex&&(i="list-card selected-list-card"),Object(O.jsxs)("div",{id:"song-"+c+"-card",className:i,onClick:function(e){t.updatePlaySong(c)},children:[c+1,".",s.title," by ",s.artist]},c)};var Fe=function(e){var t=Object(r.useContext)(T).store,n=Object(r.useContext)(g).auth,a=Object(r.useState)(!1),s=Object(d.a)(a,2),c=s[0],i=s[1],o=Object(r.useState)(""),j=Object(d.a)(o,2),b=j[0],p=j[1],x=Object(r.useState)(!1),h=Object(d.a)(x,2),f=h[0],m=h[1],y=e.playlist,v=(e.selected,Object(r.useState)(!1)),S=Object(d.a)(v,2),I=S[0],L=S[1],k=Object(r.useState)(!1),w=Object(d.a)(k,2),P=w[0],N=w[1];function E(){var e=!c;e&&t.setIsListNameEditActive(),i(e)}function C(){return(C=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n.user){e.next=2;break}return e.abrupt("return");case 2:if(P){e.next=6;break}return e.next=5,t.likePlaylist(y._id,1);case 5:L(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n.user){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.dislikePlaylist(y._id,1);case 4:L(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n.user){e.next=2;break}return e.abrupt("return");case 2:if(I){e.next=6;break}return e.next=5,t.likePlaylist(y._id,2);case 5:N(!0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n.user){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.dislikePlaylist(y._id,2);case 4:N(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=7;break}if(null!==t.currentList){e.next=5;break}return m(!f),e.next=5,t.setCurrentList(y._id);case 5:e.next=10;break;case 7:return m(!f),e.next=10,t.closeCurrentList();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.duplicateOwnList(y),R();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){if(null!==n.user){var e=y.likes.indexOf(n.user.email);e>-1&&L(!0),(e=y.dislikes.indexOf(n.user.email))>-1&&N(!0)}})),t.isListNameEditActive;var U=Object(O.jsx)(J.a,{id:y._id,sx:{display:"flex",p:1},style:{width:"100%",fontSize:"25xpt",border:"1px solid",borderRadius:"5px",marginBottom:"20px"},button:!0,children:Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsxs)(ee.a,{item:!0,xs:6,children:[Object(O.jsx)("h2",{children:y.name}),Object(O.jsxs)("p",{children:["By ",y.ownerName]})]}),Object(O.jsxs)(ee.a,{item:!0,xs:3,children:[!I&&Object(O.jsx)(Te.a,{onClick:function(){return C.apply(this,arguments)}}),I&&Object(O.jsx)(Qe.a,{onClick:function(){return _.apply(this,arguments)}}),y.likes.length]}),Object(O.jsxs)(ee.a,{item:!0,xs:3,children:[!P&&Object(O.jsx)(De.a,{onClick:function(){return D.apply(this,arguments)}}),P&&Object(O.jsx)(Re.a,{onClick:function(){return A.apply(this,arguments)}}),y.dislikes.length]}),f&&Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)(V.a,{tabIndex:"0",sx:{maxHeight:"300px",overflow:"scroll"},children:Object(O.jsx)(ce.a,{id:"playlist-cards",sx:{width:"100%",bgcolor:"background.paper"},children:y&&y.songs.map((function(e,t){return Object(O.jsx)(Ue,{id:"playlist-song-"+t,index:t,song:e},"playlist-song-"+t)}))})})}),null!==n.user&&Object(O.jsx)(B.a,{onClick:function(){return Q.apply(this,arguments)},children:"Duplicate"})]}),Object(O.jsx)(ee.a,{item:!0,xs:6,children:Object(O.jsxs)("p",{children:["Published: ",y.publishedDate.substring(0,10)]})}),Object(O.jsx)(ee.a,{item:!0,xs:3,children:Object(O.jsxs)("p",{children:["Listens: ",y.listens]})}),Object(O.jsxs)(ee.a,{item:!0,xs:3,children:[!f&&Object(O.jsx)(ae.a,{onClick:R}),f&&Object(O.jsx)(ne.a,{onClick:R})]})]})},y._id);return c&&(U=Object(O.jsx)($.a,{margin:"normal",required:!0,fullWidth:!0,id:"list-"+y._id,label:"Playlist Name",name:"name",autoComplete:"Playlist Name",className:"list-card",onKeyPress:function(e){if("Enter"===e.code){var n=e.target.id.substring("list-".length);t.changeListName(n,b),E()}},onChange:function(e){p(e.target.value)},defaultValue:y.name,inputProps:{style:{fontSize:48}},InputLabelProps:{style:{fontSize:24}},autoFocus:!0})),U},Ge=function(){Object(r.useEffect)(Object(u.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadIdNamePairs();case 2:case"end":return t.stop()}}),t)}))),[]);var e=Object(r.useContext)(T).store,t="";return e&&(t=Object(O.jsx)(ce.a,{sx:{width:"90%",left:"5%",bgcolor:"background.paper"},children:e.allPlaylists.map((function(e){return Object(O.jsx)(Fe,{playlist:e,selected:!1},e._id)}))})),Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"All Published Playlists"}),Object(O.jsx)("div",{id:"list-selector-list",children:t})]})};var He=function(e){var t=Object(r.useContext)(T).store,n=Object(r.useContext)(g).auth,a=Object(r.useState)(!1),s=Object(d.a)(a,2),c=s[0],i=s[1],o=Object(r.useState)(""),j=Object(d.a)(o,2),b=j[0],p=j[1],x=Object(r.useState)(!1),h=Object(d.a)(x,2),f=h[0],m=h[1],y=e.playlist,v=(e.selected,Object(r.useState)(!1)),S=Object(d.a)(v,2),I=S[0],L=S[1],k=Object(r.useState)(!1),w=Object(d.a)(k,2),P=w[0],N=w[1];function E(){var e=!c;e&&t.setIsListNameEditActive(),i(e)}function C(){return(C=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.markListForDeletion(y._id),Q();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.duplicateOwnList(y),Q();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=4;break}return e.next=3,t.likePlaylist(y._id,1);case 3:L(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dislikePlaylist(y._id,1);case 2:L(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I){e.next=4;break}return e.next=3,t.likePlaylist(y._id,2);case 3:N(!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dislikePlaylist(y._id,2);case 2:N(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return U.apply(this,arguments)}function U(){return(U=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=7;break}if(null!==t.currentList){e.next=5;break}return m(!f),e.next=5,t.setCurrentList(y._id);case 5:e.next=10;break;case 7:return m(!f),e.next=10,t.closeCurrentList();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){var e=y.likes.indexOf(n.user.email);e>-1&&L(!0),(e=y.dislikes.indexOf(n.user.email))>-1&&N(!0)})),t.isListNameEditActive;var F=Object(O.jsx)(J.a,{id:y._id,sx:{display:"flex",p:1},style:{width:"100%",fontSize:"25xpt",border:"1px solid",borderRadius:"5px",marginBottom:"20px"},button:!0,children:Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsxs)(ee.a,{item:!0,xs:6,children:[Object(O.jsx)("h2",{children:y.name}),Object(O.jsxs)("p",{children:["By ",y.ownerName]})]}),Object(O.jsxs)(ee.a,{item:!0,xs:3,children:[!I&&Object(O.jsx)(Te.a,{onClick:function(){return D.apply(this,arguments)}}),I&&Object(O.jsx)(Qe.a,{onClick:function(){return A.apply(this,arguments)}}),y.likes.length]}),Object(O.jsxs)(ee.a,{item:!0,xs:3,children:[!P&&Object(O.jsx)(De.a,{onClick:function(){return R.apply(this,arguments)}}),P&&Object(O.jsx)(Re.a,{onClick:function(){return M.apply(this,arguments)}}),y.dislikes.length]}),f&&Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)(V.a,{tabIndex:"0",sx:{maxHeight:"300px",overflow:"scroll"},children:Object(O.jsx)(ce.a,{id:"playlist-cards",sx:{width:"100%",bgcolor:"background.paper"},children:y&&y.songs.map((function(e,t){return Object(O.jsx)(Ue,{id:"playlist-song-"+t,index:t,song:e},"playlist-song-"+t)}))})})}),Object(O.jsx)(ee.a,{item:!0,xs:2,children:Object(O.jsx)(B.a,{onClick:function(){return C.apply(this,arguments)},children:"Delete"})}),Object(O.jsx)(ee.a,{item:!0,xs:2,children:Object(O.jsx)(B.a,{onClick:function(){return _.apply(this,arguments)},children:"Duplicate"})})]}),Object(O.jsx)(ee.a,{item:!0,xs:6,children:Object(O.jsxs)("p",{children:["Published: ",y.publishedDate.substring(0,10)]})}),Object(O.jsx)(ee.a,{item:!0,xs:3,children:Object(O.jsxs)("p",{children:["Listens: ",y.listens]})}),Object(O.jsxs)(ee.a,{item:!0,xs:3,children:[!f&&Object(O.jsx)(ae.a,{onClick:Q}),f&&Object(O.jsx)(ne.a,{onClick:Q})]})]})},y._id);return c&&(F=Object(O.jsx)($.a,{margin:"normal",required:!0,fullWidth:!0,id:"list-"+y._id,label:"Playlist Name",name:"name",autoComplete:"Playlist Name",className:"list-card",onKeyPress:function(e){if("Enter"===e.code){var n=e.target.id.substring("list-".length);t.changeListName(n,b),E()}},onChange:function(e){p(e.target.value)},defaultValue:y.name,inputProps:{style:{fontSize:48}},InputLabelProps:{style:{fontSize:24}},autoFocus:!0})),F},Be=function(){var e=Object(r.useContext)(T).store,t=Object(r.useContext)(g).auth;Object(r.useEffect)(Object(u.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadIdNamePairs();case 2:case"end":return t.stop()}}),t)}))),[]);var n="";function a(){return(a=Object(u.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.currentList){t.next=3;break}return t.next=3,e.createNewList();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e&&(console.log(e.idNamePairs),n=Object(O.jsxs)(ce.a,{sx:{width:"90%",left:"5%",bgcolor:"background.paper"},children:[Object(O.jsx)("div",{className:"list-cards-left",children:e.idNamePairs.map((function(e){return!e.published&&Object(O.jsx)(fe,{playlist:e,selected:!1},e._id)||e.published&&Object(O.jsx)(He,{playlist:e,selected:!1},e._id)}))}),Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)("div",{onClick:function(){return a.apply(this,arguments)},className:"list-card unselected-list-card",children:"Create New Playlist"})})]})),Object(O.jsxs)("div",{children:[Object(O.jsx)("h1",{children:"Your Playlists"}),null!==t.user&&Object(O.jsx)("div",{id:"list-selector-list",children:n}),null===t.user&&Object(O.jsx)("div",{id:"list-selector-list",children:Object(O.jsx)("h1",{children:"Create an account to make your own playlists!"})})]})},We=n(145),Ve=n(139),Ke=n.n(Ve),ze=n(140),Ye=n.n(ze),qe=n(142),Xe=n.n(qe),Ze=n(141),Je=n.n(Ze);function $e(e){var t=Object(r.useContext)(T).store,n=Object(r.useState)(!1),a=Object(d.a)(n,2),s=a[0],c=a[1];e.display;function i(e){return o.apply(this,arguments)}function o(){return(o=Object(u.a)(Object(l.a)().mark((function e(n){var r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.currentList.songs[t.currentPlayIndex].youTubeId,n.loadVideoById(r),n.playVideo();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return b.apply(this,arguments)}function b(){return(b=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.updatePlaySong((t.currentPlayIndex+1)%t.currentList.songs.length);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.currentPlayIndex-1!=-1){e.next=5;break}return e.next=3,t.updatePlaySong(t.currentList.songs.length-1);case 3:e.next=7;break;case 5:return e.next=7,t.updatePlaySong((t.currentPlayIndex-1)%t.currentList.songs.length);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,t.addListen();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(u.a)(Object(l.a)().mark((function e(t){var n,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,r=t.target,0!==n){e.next=7;break}if(!s){e.next=7;break}return e.next=6,j();case 6:i(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)(Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("youtube use effect");case 1:case"end":return e.stop()}}),e)}))));return t.currentList&&t.currentList.songs.length>0&&Object(O.jsx)("div",{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(We.a,{videoId:s&&t.currentList.songs[t.currentPlayIndex].youTubeId,opts:{height:"230",width:"400",playerVars:{autoplay:1}},onReady:function(e){s&&(i(e.target),e.target.playVideo())},onStateChange:function(e){return h.apply(this,arguments)}}),Object(O.jsxs)("h3",{children:["Playlist: ",t.currentList.name]}),Object(O.jsxs)("h3",{children:["Song #: ",t.currentPlayIndex+1]}),Object(O.jsxs)("h3",{children:["Title: ",t.currentList.songs[t.currentPlayIndex].title]}),Object(O.jsxs)("h3",{children:["Artist: ",t.currentList.songs[t.currentPlayIndex].artist]}),Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsx)(ee.a,{xs:2}),Object(O.jsx)(ee.a,{xs:2,children:Object(O.jsx)(Ke.a,{onClick:function(){return p.apply(this,arguments)}})}),Object(O.jsx)(ee.a,{xs:2,children:Object(O.jsx)(Ye.a,{onClick:function(){c(!1)}})}),Object(O.jsx)(ee.a,{xs:2,children:Object(O.jsx)(Je.a,{onClick:function(){return x.apply(this,arguments)}})}),Object(O.jsx)(ee.a,{xs:2,children:Object(O.jsx)(Xe.a,{onClick:j})})]})]})})}var et=function(e){var t=e.comment;return console.log(t),Object(O.jsxs)("div",{className:"unselected-list-card",children:[t.comment," - ",t.name]})};var tt=function(){var e=Object(r.useContext)(T).store,t=Object(r.useContext)(g).auth;function n(){return(n=Object(u.a)(Object(l.a)().mark((function t(n){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(13!==n.keyCode){t.next=4;break}return console.log(n.target.value),t.next=4,e.addComment(n.target.value);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)(Object(u.a)(Object(l.a)().mark((function e(){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),[e]),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"all-comments",children:e.currentList.comments.map((function(e){return Object(O.jsx)(et,{comment:e})}))}),null!==t.user&&e.currentList.published&&Object(O.jsx)("div",{className:"add-comment",children:Object(O.jsx)($.a,{id:"outlined-basic",label:"Add a Comment",variant:"outlined",onKeyDown:function(e){return n.apply(this,arguments)},style:{width:"50vh",marginTop:"20px"}})}),null!==t.user&&!e.currentList.published&&Object(O.jsx)("div",{className:"add-comment",children:Object(O.jsx)("p",{children:"Publish your playlist so users can view"})})]})},nt=function(){var e=Object(r.useContext)(T).store,t=Object(r.useContext)(g).auth,n=Object(r.useState)(!0),a=Object(d.a)(n,2),s=a[0],c=a[1];function i(){c(!s)}Object(r.useEffect)(Object(u.a)(Object(l.a)().mark((function t(){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadIdNamePairs();case 2:case"end":return t.stop()}}),t)}))),[t]);e&&(ce.a,e.idNamePairs.map((function(e){return Object(O.jsx)(fe,{playlist:e,selected:!1},e._id)})));var o="",j="";return s?j="no-show":o="no-show",Object(O.jsxs)("div",{id:"playlist-selector",children:[Object(O.jsx)(Ee,{}),Object(O.jsxs)("div",{className:"all",children:[Object(O.jsxs)("div",{className:"left",children:[t.allLists&&Object(O.jsx)(Ge,{}),t.home&&Object(O.jsx)(Be,{})]}),e.currentList&&Object(O.jsxs)("div",{className:"right",children:[Object(O.jsxs)(ee.a,{container:!0,className:"right-buttons",children:[s&&Object(O.jsxs)("div",{children:[Object(O.jsx)(B.a,{children:"Player"}),Object(O.jsx)(B.a,{variant:"contained",onClick:i,children:"Comments"})]}),!s&&Object(O.jsxs)("div",{children:[Object(O.jsx)(B.a,{variant:"contained",onClick:i,children:"Player"}),Object(O.jsx)(B.a,{children:"Comments"})]})]}),Object(O.jsx)("div",{className:o,children:Object(O.jsx)($e,{})}),Object(O.jsx)("div",{className:j,children:Object(O.jsx)(tt,{})})]})]})]})};function rt(){var e=Object(r.useContext)(g).auth,t=Object(o.f)();return Object(O.jsxs)("div",{id:"splash-screen",style:{background:"linear-gradient(#FFFFF7, #008080)"},children:[Object(O.jsx)("h4",{children:"Welcome to Playlister"}),Object(O.jsx)("p",{className:"description",children:"Playlister allows you to listen through any published playlist from around the world. Create a FREE account today and publish your own playlists, while also commenting and liking other playlists."}),Object(O.jsx)("p",{className:"description",children:"Created by Rahul Raja"}),Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsx)(ee.a,{xs:3}),Object(O.jsx)(ee.a,{xs:2.5,children:Object(O.jsx)(B.a,{color:"secondary",variant:"contained",onClick:function(){e.continueAsGuest()},className:"login-button",children:"Continue As Guest"})}),Object(O.jsx)(ee.a,{xs:2,children:Object(O.jsx)(B.a,{color:"secondary",variant:"contained",onClick:function(){t.push("/login")},className:"login-button",children:"Sign In"})}),Object(O.jsx)(ee.a,{xs:2,children:Object(O.jsx)(B.a,{color:"secondary",variant:"contained",onClick:function(){t.push("/register")},className:"login-button",children:"Sign Up"})})]})]})}function at(){var e=Object(r.useContext)(g).auth;return console.log("HomeWrapper auth.loggedIn: "+e.loggedIn),e.loggedIn?Object(O.jsx)(nt,{}):Object(O.jsx)(rt,{})}var st=n(111),ct=n(278);function it(e){return Object(O.jsxs)(X.a,Object(st.a)(Object(st.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",Object(O.jsx)(ct.a,{color:"inherit",href:"/",children:"Playlister"})," ",(new Date).getFullYear(),"."]}))}var ot=n(279),lt=n(268),ut=n(265),dt=n(290),jt=n(92),bt=n.n(jt),pt=n(283),xt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function Ot(){var e=Object(r.useContext)(g),t=e.auth,n=e.error;Object(r.useEffect)((function(){}),[t,n]);return Object(O.jsx)(oe.a,{open:t.e,children:Object(O.jsxs)(V.a,{sx:xt,children:[Object(O.jsx)(xe.a,{open:t.e,severity:"warning",children:t.message}),Object(O.jsx)(B.a,{id:"dialog-yes-button",className:"modal-button",onClick:function(){t.hideErrorModal()},color:"primary",variant:"contained",children:"Confirm"})]})})}function ht(){var e=Object(r.useContext)(g).auth,t=Object(o.f)();return Object(O.jsxs)(ee.a,{container:!0,component:"main",sx:{height:"100vh"},children:[Object(O.jsx)(ut.a,{}),Object(O.jsx)(ee.a,{item:!0,xs:!1,sm:4,md:7,sx:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[50]:e.palette.grey[900]},backgroundSize:"cover",backgroundPosition:"center"}}),Object(O.jsx)(ee.a,{item:!0,xs:12,sm:8,md:5,component:pt.a,elevation:6,square:!0,children:Object(O.jsxs)(V.a,{sx:{my:8,mx:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)(ot.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(O.jsx)(bt.a,{})}),Object(O.jsx)(X.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(O.jsxs)(V.a,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault();var n=new FormData(t.currentTarget);e.loginUser(n.get("email"),n.get("password"))},sx:{mt:1},children:[Object(O.jsx)($.a,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0}),Object(O.jsx)($.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}),Object(O.jsx)(dt.a,{control:Object(O.jsx)(lt.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(O.jsx)(B.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(O.jsxs)(ee.a,{container:!0,children:[Object(O.jsx)(ee.a,{item:!0,xs:!0,children:Object(O.jsx)(ct.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(O.jsx)(ee.a,{item:!0,children:Object(O.jsx)(ct.a,{onClick:function(e){t.push("/register")},variant:"body2",children:"Don't have an account? Sign Up"})})]}),Object(O.jsx)(it,{sx:{mt:5}})]})]})}),Object(O.jsx)(Ot,{})]})}var ft=n(280);function mt(){var e=Object(r.useContext)(g).auth;return Object(O.jsxs)(ft.a,{component:"main",maxWidth:"xs",children:[Object(O.jsx)(ut.a,{}),Object(O.jsxs)(V.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(O.jsx)(ot.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(O.jsx)(bt.a,{})}),Object(O.jsx)(X.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(O.jsxs)(V.a,{component:"form",noValidate:!0,onSubmit:function(t){t.preventDefault();var n=new FormData(t.currentTarget);e.registerUser(n.get("username"),n.get("firstName"),n.get("lastName"),n.get("email"),n.get("password"),n.get("passwordVerify"))},sx:{mt:3},children:[Object(O.jsxs)(ee.a,{container:!0,spacing:2,children:[Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)($.a,{required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username"})}),Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)($.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(O.jsx)(ee.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)($.a,{autoComplete:"fname",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})}),Object(O.jsx)(ee.a,{item:!0,xs:12,sm:6,children:Object(O.jsx)($.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})}),Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)($.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})}),Object(O.jsx)(ee.a,{item:!0,xs:12,children:Object(O.jsx)($.a,{required:!0,fullWidth:!0,name:"passwordVerify",label:"Password Verify",type:"password",id:"passwordVerify",autoComplete:"new-password"})})]}),Object(O.jsx)(B.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(O.jsx)(ee.a,{container:!0,justifyContent:"flex-end",children:Object(O.jsx)(ee.a,{item:!0,children:Object(O.jsx)(ct.a,{href:"/login/",variant:"body2",children:"Already have an account? Sign in"})})})]})]}),Object(O.jsx)(it,{sx:{mt:5}}),Object(O.jsx)(Ot,{})]})}var gt=function(){var e=Object(r.useContext)(T).store;return Object(r.useContext)(g).auth.loggedIn&&e.currentList&&e.currentList.name,Object(O.jsx)("div",{})};var yt=function(){var e=Object(r.useContext)(T).store;e.history=Object(o.f)();var t=function(){var t=Object(u.a)(Object(l.a)().mark((function t(n){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(90!==n.keyCode||!n.ctrlKey){t.next=7;break}return t.next=3,e.canUndo();case 3:if(!t.sent){t.next=7;break}return t.next=7,e.undo();case 7:if(89!==n.keyCode||!n.ctrlKey){t.next=14;break}return t.next=10,e.canRedo();case 10:if(!t.sent){t.next=14;break}return t.next=14,e.redo();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n="";return e.isEditSongModalOpen()?n=Object(O.jsx)(je,{}):e.isRemoveSongModalOpen()&&(n=Object(O.jsx)(ue,{})),console.log(e),Object(O.jsxs)(V.a,{onKeyDown:t,tabIndex:"0",children:[Object(O.jsx)(ce.a,{id:"playlist-cards",sx:{width:"100%",bgcolor:"background.paper"},children:e.currentList&&e.currentList.songs.map((function(e,t){return Object(O.jsx)(se,{id:"playlist-song-"+t,index:t,song:e},"playlist-song-"+t)}))}),n]})},vt=function(){return Object(O.jsx)(i.a,{children:Object(O.jsx)(m,{children:Object(O.jsxs)(F,{children:[Object(O.jsx)(Z,{}),Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/",exact:!0,component:at}),Object(O.jsx)(o.a,{path:"/login/",exact:!0,component:ht}),Object(O.jsx)(o.a,{path:"/register/",exact:!0,component:mt}),Object(O.jsx)(o.a,{path:"/playlist/:id",exact:!0,component:yt})]}),Object(O.jsx)(gt,{})]})})})},St=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,294)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(vt,{})}),document.getElementById("root")),St()}},[[211,1,2]]]);
//# sourceMappingURL=main.980aac34.chunk.js.map